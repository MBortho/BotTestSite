<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>HANS HQ • FAQ Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="data:,">
  <style>
    :root{
      --bg:#0b1020; --ink:#0f172a; --ink-2:#334155;
      --brand:#2563eb; --brand-2:#1e40af; --ring:rgba(37,99,235,.4);
      --panel:#ffffff; --muted:#6b7280; --page:#f6f7f9;
    }
    @media (prefers-color-scheme: dark){
      :root{ --panel:#0b1020; --page:#0a0f1d; --ink:#e5e7eb; --ink-2:#cbd5e1; --muted:#94a3b8;}
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink); background:var(--page)}

    /* Header */
    .site-header{
      position:sticky; top:0; z-index:10; backdrop-filter:saturate(180%) blur(6px);
      background:color-mix(in oklab, var(--page) 92%, #0000);
      border-bottom:1px solid color-mix(in oklab, var(--ink) 10%, #0000);
    }
    .nav{max-width:1100px; margin:0 auto; padding:10px 20px; display:flex; align-items:center; gap:12px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:700}
    .brand-badge{
      width:28px; height:28px; border-radius:8px;
      background:linear-gradient(135deg,var(--brand),var(--brand-2));
      color:#fff; display:grid; place-items:center; font-weight:800; font-size:13px;
      box-shadow:0 4px 14px rgba(37,99,235,.35);
    }
    .nav-fill{flex:1}
    .btn{appearance:none; border:1px solid color-mix(in oklab,var(--ink) 16%, #0000); background:transparent; color:var(--ink);
      border-radius:10px; padding:8px 12px; font-weight:600; cursor:pointer}
    .btn:focus-visible{outline:3px solid var(--ring); outline-offset:2px}

    /* Hero */
    .hero{
      background: radial-gradient(1200px 420px at 50% -80px, color-mix(in oklab, var(--brand) 18%, #fff0), transparent), var(--bg);
      color:#e5ecff;
    }
    .hero-inner{max-width:900px; margin:0 auto; padding:44px 20px 28px}
    .hero h1{margin:6px 0 8px; font-size:32px; line-height:1.2}
    .hero p{margin:0; color:#cdd8ff}

    /* Main / centered card */
    .wrap{max-width:980px; margin:0 auto; padding:22px 20px 40px}
    .card{
      background:var(--panel);
      border:1px solid color-mix(in oklab,var(--ink) 10%, #0000);
      border-radius:16px;
      box-shadow:0 10px 28px rgba(0,0,0,.08);
      overflow:hidden;
    }
    .card-head{padding:18px 18px 0}
    .card-head h2{margin:0 0 6px; font-size:18px}
    .card-head p{margin:0 0 16px; color:var(--muted)}
    .meta{display:flex; gap:12px; flex-wrap:wrap; padding:0 18px 16px}
    .pill{display:inline-flex; gap:8px; align-items:center; border:1px solid color-mix(in oklab,#fff 0%, var(--ink) 18%); border-radius:999px; padding:6px 10px; font-size:12px; color:var(--muted)}

    /* Chat area (centered) */
    .chat-shell{padding:0 0 18px}
    .chat-frame{
      width:100%;
      max-width:860px;
      height:640px;
      margin:0 auto;
      background:var(--panel);
      border-top:1px solid color-mix(in oklab,var(--ink) 8%, #0000);
    }
    #webchat{height:100%}

    /* Footer */
    footer{padding:22px 0; color:var(--muted); text-align:center}
  </style>

  <!-- BotFramework Web Chat -->
  <script src="https://cdn.botframework.com/botframework-webchat/latest/webchat.js"></script>
</head>
<body>
  <!-- Header -->
  <div class="site-header" role="banner">
    <div class="nav">
      <div class="brand"><div class="brand-badge">HQ</div><div>HANS HQ</div></div>
      <div class="nav-fill"></div>
      <button class="btn" id="themeToggle" aria-label="Toggle theme">Toggle theme</button>
    </div>
  </div>

  <!-- Hero -->
  <header class="hero">
    <div class="hero-inner">
      <h1>HANS HQ — FAQ Assistant</h1>
      <p>Temporary access while the main site is being finalized. Use the assistant below to learn about HANS HQ, setup, pricing, and support.</p>
    </div>
  </header>

  <!-- Centered Chat -->
  <main class="wrap" role="main">
    <section class="card" aria-label="Chat">
      <div class="card-head">
        <h2>Ask a question</h2>
        <p>Examples: “What is HANS HQ?”, “How do I get started?”, “Is PHI collected?”</p>
        <div class="meta">
          <span class="pill">No PHI</span>
          <span class="pill">Marketing-friendly</span>
          <span class="pill">Button or free-text</span>
        </div>
      </div>
      <div class="chat-shell">
        <div id="webchat" class="chat-frame" aria-label="Chat window"></div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    © <span id="year"></span> Ortho Molecular Products
  </footer>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Theme toggle
    const tog = document.getElementById('themeToggle');
    tog.addEventListener('click', () => {
      const current =
        document.documentElement.style.colorScheme ||
        (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.style.colorScheme = next;
    });

    // ---- Web Chat setup (Direct Line token endpoint) ----
    (async function () {
      // If you already have a token endpoint, put it here:
      const TOKEN_URL = 'https://orthohqbot-cgc2dgdac5b3daaa.centralus-01.azurewebsites.net/api/directline/token';
      // Or replace with your own API route. Must return: { "token": "<directLineToken>" }

      const el = document.getElementById('webchat');

      // Simple skeleton while loading
      el.innerHTML =
        '<div style="height:100%;display:grid;place-items:center;color:var(--muted)">' +
        '<div>Loading assistant…</div></div>';

      try {
        const res = await fetch(TOKEN_URL, { cache: 'no-store' });
        if (!res.ok) throw new Error('Token fetch failed: ' + res.status);
        const { token } = await res.json();

        const brand  = getComputedStyle(document.documentElement).getPropertyValue('--brand').trim();
        const brand2 = getComputedStyle(document.documentElement).getPropertyValue('--brand-2').trim();
        const subtle = getComputedStyle(document.documentElement).getPropertyValue('--muted').trim();

        const directLine = window.WebChat.createDirectLine({ token });

        const styleOptions = {
          primaryFont: 'system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif',
          fontSize: '13px',
          bubbleBorderRadius: 12,
          bubbleFromUserBorderRadius: 12,
          bubbleNubSize: 0,
          bubbleFromUserNubSize: 0,
          hideBotAvatar: true,
          hideUserAvatar: true,
          bubbleMaxWidth: 1100,
          sendBoxPlaceholder: 'Type your question…',
          sendBoxButtonColor: brand,
          sendBoxButtonColorOnHover: brand2,
          subtle,
          suggestedActionsLayout: matchMedia('(max-width: 520px)').matches ? 'stacked' : 'carousel'
        };

        const adaptiveCardsHostConfig = {
          fontFamily: getComputedStyle(document.body).fontFamily,
          spacing: { small: 6, default: 12, medium: 16, large: 18, extraLarge: 24, padding: 12 },
          separator: { lineThickness: 1, lineColor: 'rgba(0,0,0,0.10)' },
          containerStyles: {
            default: { backgroundColor: 'transparent' },
            emphasis: { backgroundColor: 'rgba(37,99,235,0.03)' }
          },
          actions: {
            buttonSpacing: 10, maxActions: 10, actionsOrientation: 'vertical', actionAlignment: 'stretch',
            showCard: { actionMode: 'inline', inlineTopMargin: 8 }
          },
          imageSizes: { small: 24, medium: 48, large: 96 }
        };

        // Render
        el.innerHTML = '';
        window.WebChat.renderWebChat({ directLine, styleOptions, adaptiveCardsHostConfig, locale: 'en-US' }, el);
      } catch (err) {
        console.error(err);
        el.innerHTML =
          '<div style="height:100%;display:grid;place-items:center;color:#b91c1c">' +
          '<div>We couldn’t start the assistant. Please refresh this page.</div></div>';
      }
    })();
  </script>
</body>
</html>
